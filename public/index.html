<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ZeppBot - Panel</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;background:#0b0f1a;color:#e6eef8;padding:20px}
    .card{background:#0f1724;padding:16px;border-radius:8px;margin:10px 0}
    input,button{padding:8px;margin:6px 0;border-radius:6px;border:1px solid #243240;background:#081322;color:#fff}
    table{width:100%;border-collapse:collapse;margin-top:10px}
    th,td{padding:8px;border-bottom:1px solid #243240}
  </style>
</head>
<body>
  <h1>ZeppBot - Panel (Polski)</h1>
  <div class="card">
    <h3>Logowanie do panelu</h3>
    <label>ID serwera</label><br><input id="serverId" placeholder="Wprowadź ID serwera"><br>
    <label>Hasło</label><br><input id="password" type="password" placeholder="Hasło"><br>
    <button onclick="login()">Zaloguj</button>
    <div id="loginMsg"></div>
  </div>
  <div id="panel" style="display:none">
    <div class="card">
      <h3>Logi moderacji</h3>
      <div id="logs">Ładowanie...</div>
    </div>
  </div>
  <script>
    async function login(){
      const serverId=document.getElementById('serverId').value.trim();
      const password=document.getElementById('password').value.trim();
      if(!serverId||!password){document.getElementById('loginMsg').innerText='Podaj dane';return;}
      const res=await fetch('/api/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({serverId,password})});
      const j=await res.json();
      if(res.ok){ document.getElementById('loginMsg').innerText='Zalogowano'; document.getElementById('panel').style.display='block'; loadLogs(serverId); }
      else { document.getElementById('loginMsg').innerText='Błąd: '+(j.error||''); }
    }
    async function loadLogs(serverId){
      const res=await fetch('/api/logs/'+serverId);
      const logs=await res.json();
      const html=logs.map(l=>`<div><b>${l.action}</b> ${l.user_id} przez ${l.moderator} (${l.reason}) - ${l.created_at}</div>`).join('');
      document.getElementById('logs').innerHTML=html||'Brak';
    }
  </script>
</body>
</html>
